{% extends "base.html" %}

{% block header %}
    {% block title %} List {% endblock %}
{% endblock %}

{% block content %}
    <main>
        <h1 class="mt-10 flex justify-center items-center text-3xl font-bold underline">List</h1>
        <script>
            var myjson = {{ data|tojson|safe }};
            console.log(myjson);
        </script>
        <div id='root' class='md:max-lg:flex content-start'></div>
        <script type="text/babel">
            // Obtain the root
            const rootElement = document.getElementById('root')

            // Create a ES6 class component
            class EntryList extends React.Component {
                // Use the render function to return JSX component
                render() {
                    return (
                        <div class="m-8 h-56">
                            <h2 class="m-8 text-2xl font-bold underline">{this.props.name}</h2>
                            <div class="flex flex-wrap -mx-1 lg:-mx-4">
                            {this.props.listdata.map(item =>
                                <div class="my-1 px-1 w-full md:w-1/2 lg:my-4 lg:px-4 lg:w-1/3">
                                    <article
                                        class="rounded-lg border border-gray-100 p-4 shadow-sm transition hover:shadow-lg sm:p-6">
                                        <span class="inline-block rounded bg-blue-600 p-2 text-white">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none"
                                                 viewBox="0 0 24 24" stroke="currentColor">
                                                <path d="M12 14l9-5-9-5-9 5 9 5z"/>
                                                <path
                                                    d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"/>
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                      d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222"/>
                                            </svg>
                                        </span>
                                        <a href="/">
                                            <h3 class="mt-0.5 text-lg font-medium text-gray-900">
                                                {item.topic}
                                            </h3>
                                        </a>
                                        <p class="mt-2 text-sm leading-relaxed text-gray-500 line-clamp-3">
                                            {item.message}
                                        </p>
                                        <a href="/wiki"
                                           class="group mt-4 inline-flex items-center gap-1 text-sm font-medium text-blue-600">
                                            Edit
                                            <span aria-hidden="true"
                                                  class="block transition group-hover:translate-x-0.5"></span>
                                        </a>
                                    </article>
                                </div>
                            )}
                            </div>
                        </div>
                    );
                }
            }

            // Create a function to wrap up your component
            function App() {
                return (
                    <div>
                        <EntryList name="Entry List" listdata={myjson}/>
                    </div>
                )
            }

            // Use the ReactDOM.render to show your component on the browser
            ReactDOM.render(
                <App/>,
                rootElement
            )
        </script>
    </main>
{% endblock %}